❯ PS /Users/vglazhevskyi/Learning/azure-fundamentals-23/04> ./deployVM.ps1                                  
Resource group do not exist
Create new resource group  tetris-bc854b17
{
  "id": "/subscriptions/43aa0595-8fda-44a4-b227-f3733785e5c2/resourceGroups/tetris-bc854b17",
  "location": "eastus",
  "managedBy": null,
  "name": "tetris-bc854b17",
  "properties": {
    "provisioningState": "Succeeded"
  },
  "tags": null,
  "type": "Microsoft.Resources/resourceGroups"
}

DeploymentName          : azuredeploy
ResourceGroupName       : tetris-bc854b17
ProvisioningState       : Succeeded
Timestamp               : 5/9/2023 8:48:47 PM
Mode                    : Incremental
TemplateLink            : 
Parameters              : 
                          Name                        Type                       Value     
                          ==========================  =========================  ==========
                          vmName                      String                     "testNginxVM"
                          adminUsername               String                     "catching"
                          authenticationType          String                     "password"
                          adminPasswordOrKey          SecureString               null      
                          dnsLabelPrefix              String                     "tetris"  
                          ubuntuOSVersion             String                     "18.04-LTS"
                          location                    String                     "East US" 
                          vmSize                      String                     "Standard_DS1_v2"
                          virtualNetworkName          String                     "testNginxVMVNet"
                          subnetName                  String                     "testNginxVMQSubnet"
                          networkSecurityGroupName    String                     "testNginxVMNSG"
                          
Outputs                 : 
                          Name             Type                       Value     
                          ===============  =========================  ==========
                          adminUsername    String                     "catching"
                          hostname         String                     "tetris.eastus.cloudapp.azure.com"
                          sshCommand       String                     "ssh catching@tetris.eastus.cloudapp.azure.com"
                          
DeploymentDebugLogLevel : 

(VMExtensionProvisioningError) VM has reported a failure when processing extension 'customScript'. Error message: "Enable failed: failed to execute command: command terminated with exit status=100
[stdout]
apt-key add -
Get:1 http://security.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]
Hit:2 http://archive.ubuntu.com/ubuntu bionic InRelease
Get:3 http://security.ubuntu.com/ubuntu bionic-security/main amd64 Packages [2656 kB]
Get:4 http://archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]
Get:5 http://security.ubuntu.com/ubuntu bionic-security/main Translation-en [457 kB]
Get:6 http://security.ubuntu.com/ubuntu bionic-security/restricted amd64 Packages [1240 kB]
Get:7 http://security.ubuntu.com/ubuntu bionic-security/restricted Translation-en [172 kB]
Get:8 http://security.ubuntu.com/ubuntu bionic-security/universe amd64 Packages [1292 kB]
Get:9 http://archive.ubuntu.com/ubuntu bionic-backports InRelease [83.3 kB]
Get:10 http://security.ubuntu.com/ubuntu bionic-security/universe Translation-en [304 kB]
Get:11 http://security.ubuntu.com/ubuntu bionic-security/multiverse amd64 Packages [19.8 kB]
Get:12 http://security.ubuntu.com/ubuntu bionic-security/multiverse Translation-en [3928 B]
Get:13 http://archive.ubuntu.com/ubuntu bionic-updates/main amd64 Packages [2989 kB]
Get:14 http://archive.ubuntu.com/ubuntu bionic-updates/main Translation-en [545 kB]
Get:15 http://archive.ubuntu.com/ubuntu bionic-updates/restricted amd64 Packages [1269 kB]
Get:16 http://archive.ubuntu.com/ubuntu bionic-updates/restricted Translation-en [176 kB]
Get:17 http://archive.ubuntu.com/ubuntu bionic-updates/universe amd64 Packages [1903 kB]
Get:18 http://archive.ubuntu.com/ubuntu bionic-updates/universe Translation-en [417 kB]
Get:19 http://archive.ubuntu.com/ubuntu bionic-updates/multiverse amd64 Packages [25.6 kB]
Get:20 http://archive.ubuntu.com/ubuntu bionic-updates/multiverse Translation-en [6088 B]
Get:21 http://archive.ubuntu.com/ubuntu bionic-backports/main amd64 Packages [53.3 kB]
Get:22 http://archive.ubuntu.com/ubuntu bionic-backports/main Translation-en [14.6 kB]
Get:23 http://archive.ubuntu.com/ubuntu bionic-backports/universe amd64 Packages [18.1 kB]
Get:24 http://archive.ubuntu.com/ubuntu bionic-backports/universe Translation-en [8668 B]
Reading package lists...

[stderr]
E: can not open /var/lib/apt/lists/archive.ubuntu.com_ubuntu_dists_bionic_InRelease - fopen (2: No such file or directory)
E: The repository 'http://archive.ubuntu.com/ubuntu bionic InRelease' provides only weak security information.
"

More information on troubleshooting is available at https://aka.ms/vmextensionlinuxtroubleshoot 
Code: VMExtensionProvisioningError
Message: VM has reported a failure when processing extension 'customScript'. Error message: "Enable failed: failed to execute command: command terminated with exit status=100
[stdout]
apt-key add -
Get:1 http://security.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]
Hit:2 http://archive.ubuntu.com/ubuntu bionic InRelease
Get:3 http://security.ubuntu.com/ubuntu bionic-security/main amd64 Packages [2656 kB]
Get:4 http://archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]
Get:5 http://security.ubuntu.com/ubuntu bionic-security/main Translation-en [457 kB]
Get:6 http://security.ubuntu.com/ubuntu bionic-security/restricted amd64 Packages [1240 kB]
Get:7 http://security.ubuntu.com/ubuntu bionic-security/restricted Translation-en [172 kB]
Get:8 http://security.ubuntu.com/ubuntu bionic-security/universe amd64 Packages [1292 kB]
Get:9 http://archive.ubuntu.com/ubuntu bionic-backports InRelease [83.3 kB]
Get:10 http://security.ubuntu.com/ubuntu bionic-security/universe Translation-en [304 kB]
Get:11 http://security.ubuntu.com/ubuntu bionic-security/multiverse amd64 Packages [19.8 kB]
Get:12 http://security.ubuntu.com/ubuntu bionic-security/multiverse Translation-en [3928 B]
Get:13 http://archive.ubuntu.com/ubuntu bionic-updates/main amd64 Packages [2989 kB]
Get:14 http://archive.ubuntu.com/ubuntu bionic-updates/main Translation-en [545 kB]
Get:15 http://archive.ubuntu.com/ubuntu bionic-updates/restricted amd64 Packages [1269 kB]
Get:16 http://archive.ubuntu.com/ubuntu bionic-updates/restricted Translation-en [176 kB]
Get:17 http://archive.ubuntu.com/ubuntu bionic-updates/universe amd64 Packages [1903 kB]
Get:18 http://archive.ubuntu.com/ubuntu bionic-updates/universe Translation-en [417 kB]
Get:19 http://archive.ubuntu.com/ubuntu bionic-updates/multiverse amd64 Packages [25.6 kB]
Get:20 http://archive.ubuntu.com/ubuntu bionic-updates/multiverse Translation-en [6088 B]
Get:21 http://archive.ubuntu.com/ubuntu bionic-backports/main amd64 Packages [53.3 kB]
Get:22 http://archive.ubuntu.com/ubuntu bionic-backports/main Translation-en [14.6 kB]
Get:23 http://archive.ubuntu.com/ubuntu bionic-backports/universe amd64 Packages [18.1 kB]
Get:24 http://archive.ubuntu.com/ubuntu bionic-backports/universe Translation-en [8668 B]
Reading package lists...

[stderr]
E: can not open /var/lib/apt/lists/archive.ubuntu.com_ubuntu_dists_bionic_InRelease - fopen (2: No such file or directory)
E: The repository 'http://archive.ubuntu.com/ubuntu bionic InRelease' provides only weak security information.
"

More information on troubleshooting is available at https://aka.ms/vmextensionlinuxtroubleshoot 

PS /Users/vglazhevskyi/Learning/azure-fundamentals-23/04> az vm list                                      
[
  {
    "additionalCapabilities": null,
    "applicationProfile": null,
    "availabilitySet": null,
    "billingProfile": null,
    "capacityReservation": null,
    "diagnosticsProfile": null,
    "evictionPolicy": null,
    "extendedLocation": null,
    "extensionsTimeBudget": null,
    "hardwareProfile": {
      "vmSize": "Standard_DS1_v2",
      "vmSizeProperties": null
    },
    "host": null,
    "hostGroup": null,
    "id": "/subscriptions/43aa0595-8fda-44a4-b227-f3733785e5c2/resourceGroups/TETRIS-BC854B17/providers/Microsoft.Compute/virtualMachines/testNginxVM",
    "identity": null,
    "instanceView": null,
    "licenseType": null,
    "location": "eastus",
    "name": "testNginxVM",
    "networkProfile": {
      "networkApiVersion": null,
      "networkInterfaceConfigurations": null,
      "networkInterfaces": [
        {
          "deleteOption": null,
          "id": "/subscriptions/43aa0595-8fda-44a4-b227-f3733785e5c2/resourceGroups/tetris-bc854b17/providers/Microsoft.Network/networkInterfaces/testNginxVMNetInt",
          "primary": null,
          "resourceGroup": "tetris-bc854b17"
        }
      ]
    },
    "osProfile": {
      "adminPassword": null,
      "adminUsername": "catching",
      "allowExtensionOperations": true,
      "computerName": "testNginxVM",
      "customData": null,
      "linuxConfiguration": {
        "disablePasswordAuthentication": false,
        "enableVmAgentPlatformUpdates": false,
        "patchSettings": {
          "assessmentMode": "ImageDefault",
          "automaticByPlatformSettings": null,
          "patchMode": "ImageDefault"
        },
        "provisionVmAgent": true,
        "ssh": null
      },
      "requireGuestProvisionSignal": true,
      "secrets": [],
      "windowsConfiguration": null
    },
    "plan": null,
    "platformFaultDomain": null,
    "priority": null,
    "provisioningState": "Succeeded",
    "proximityPlacementGroup": null,
    "resourceGroup": "TETRIS-BC854B17",
    "resources": [
      {
        "autoUpgradeMinorVersion": null,
        "enableAutomaticUpgrade": null,
        "forceUpdateTag": null,
        "id": "/subscriptions/43aa0595-8fda-44a4-b227-f3733785e5c2/resourceGroups/TETRIS-BC854B17/providers/Microsoft.Compute/virtualMachines/testNginxVM/extensions/customScript",
        "instanceView": null,
        "location": null,
        "name": null,
        "protectedSettings": null,
        "protectedSettingsFromKeyVault": null,
        "provisioningState": null,
        "publisher": null,
        "resourceGroup": "TETRIS-BC854B17",
        "settings": null,
        "suppressFailures": null,
        "tags": null,
        "type": null,
        "typeHandlerVersion": null,
        "typePropertiesType": null
      },
      {
        "autoUpgradeMinorVersion": null,
        "enableAutomaticUpgrade": null,
        "forceUpdateTag": null,
        "id": "/subscriptions/43aa0595-8fda-44a4-b227-f3733785e5c2/resourceGroups/TETRIS-BC854B17/providers/Microsoft.Compute/virtualMachines/testNginxVM/extensions/enablevmaccess",
        "instanceView": null,
        "location": null,
        "name": null,
        "protectedSettings": null,
        "protectedSettingsFromKeyVault": null,
        "provisioningState": null,
        "publisher": null,
        "resourceGroup": "TETRIS-BC854B17",
        "settings": null,
        "suppressFailures": null,
        "tags": null,
        "type": null,
        "typeHandlerVersion": null,
        "typePropertiesType": null
      }
    ],
    "scheduledEventsProfile": null,
    "securityProfile": null,
    "storageProfile": {
      "dataDisks": [],
      "diskControllerType": null,
      "imageReference": {
        "communityGalleryImageId": null,
        "exactVersion": "18.04.202305010",
        "id": null,
        "offer": "UbuntuServer",
        "publisher": "Canonical",
        "sharedGalleryImageId": null,
        "sku": "18.04-LTS",
        "version": "latest"
      },
      "osDisk": {
        "caching": "ReadWrite",
        "createOption": "FromImage",
        "deleteOption": "Detach",
        "diffDiskSettings": null,
        "diskSizeGb": 30,
        "encryptionSettings": null,
        "image": null,
        "managedDisk": {
          "diskEncryptionSet": null,
          "id": "/subscriptions/43aa0595-8fda-44a4-b227-f3733785e5c2/resourceGroups/tetris-bc854b17/providers/Microsoft.Compute/disks/testNginxVM_OsDisk_1_30d6e7963d4347d08b2e2eb7da8fb248",
          "resourceGroup": "tetris-bc854b17",
          "securityProfile": null,
          "storageAccountType": "Standard_LRS"
        },
        "name": "testNginxVM_OsDisk_1_30d6e7963d4347d08b2e2eb7da8fb248",
        "osType": "Linux",
        "vhd": null,
        "writeAcceleratorEnabled": null
      }
    },
    "tags": null,
    "timeCreated": "2023-05-09T20:48:05.276350+00:00",
    "type": "Microsoft.Compute/virtualMachines",
    "userData": null,
    "virtualMachineScaleSet": null,
    "vmId": "29990c5d-5d78-4019-8a91-a2783b2ea473",
    "zones": null
  }
]

❯ PS /Users/vglazhevskyi/Learning/azure-fundamentals-23/04> az vm list --output table
Name         ResourceGroup    Location    Zones
-----------  ---------------  ----------  -------
testNginxVM  TETRIS-BC854B17  eastus